#!/usr/bin/env sh
# vim: ft=sh:

first_commit_ts=$(git log --reverse --date=unix --format=%cd | head -n 1)
now_ts=$(date "+%s")

if [ -z "$first_commit_ts" ]
then
	# No commits, so the age is zero
	echo 0
	# Exits with error if the user cares
	exit 1
fi

elapsed_ts=$(($now_ts - $first_commit_ts))
SECONDS_IN_DAY=86400
SECONDS_IN_YEAR=$(($SECONDS_IN_DAY * 365))

if [ $elapsed_ts -le $SECONDS_IN_YEAR ]
then
	echo 0 # years old
	exit 0
fi

echo $((elapsed_ts / $SECONDS_IN_YEAR))

# TODO
#
# * [ ] Consider years with 366 days
# * [ ] Allows reporting using other units: month, days
